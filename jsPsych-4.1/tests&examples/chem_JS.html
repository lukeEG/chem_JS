<!doctype html>
<html>
  <head>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="../jspsych.js"></script>
    <script src="../plugins/jspsych-single-stim.js"></script>
    <script src="../plugins/jspsych-free-sort.js"></script>
    <link rel="stylesheet" href="css/jquery-ui.css"></link>
    <link rel="stylesheet" href="css/jspsych.css"></link>
  </head>
  <body>
    <div id="jspsych-target"></div>
  </body>
  <script>




  //TO FINISH: 
  //DONE-Split into two sets, learn and test
  // DONE-Interleave first set, present it to them
  
  //-JOL after
  //MAKE IMAGES FIT
  //Names at bottom of screen (ADD into images?, or have as prompts, based on images label?)
  //10 minute delay, with something
  //DONE-Test block



//ADD ALL IMAGES TO PRECACHING
		
var cat1=["img/05_453848.jpg","img/05_477919.jpg","img/05_553503.jpg","img/05_26464824_.jpg","img/05_24748672.jpg","img/05_24010826.jpg","img/05_21404254.jpg","img/05_21241485.jpg","img/05_17365005.jpg",
"img/05_13687615.jpg","img/05_13493643.jpg","img/05_13205946.jpg","img/05_8074461.jpg","img/05_4518670.jpg","img/05_4482227.jpg","img/05_3902320.jpg","img/05_2103243.jpg","img/05_2056749.jpg","img/05_2039966.jpg",
"img/05_2017296.jpg"];	
var cat2=["img/06_5062.jpg","img/06_5693.jpg","img/06_15115.jpg","img/06_16434.jpg","img/06_31006.jpg","img/06_58980.jpg","img/06_107117.jpg","img/06_120480.jpg",
"img/06_389922.jpg","img/06_477473.jpg","img/06_553196.jpg","img/06_4444466.jpg","img/06_8901316.jpg","img/06_13906749.jpg","img/06_15259529.jpg","img/06_17344757.jpg","img/06_19585693.jpg",
"img/06_22236080.jpg","img/06_22336979.jpg","img/06_28542441.jpg"];
var cat3=["img/07_2458.jpg","img/07_86281.jpg","img/07_88348.jpg","img/07_94566.jpg","img/07_106689.jpg","img/07_248211.jpg","img/07_266675.jpg","img/07_433793.jpg",
"img/07_467848.jpg","img/07_636276.jpg","img/07_132961-78-7.jpg","img/07_2016344.jpg","img/07_3280573.jpg","img/07_3814160.jpg","img/07_4444391.jpg","img/07_4576298.jpg","img/07_9240661.jpg","img/07_10150074.jpg",
"img/07_1054644.jpg","img/07_CB82700140.jpg"];
var cat4=["img/08_120089.jpg","img/08_83892.jpg","img/08_80174.jpg","img/08_76528.jpg","img/08_71964.jpg","img/08_165288.jpg","img/08_191110.jpg","img/08_242579.jpg",
"img/08_276956.jpg","img/08_558466.jpg","img/08_637872.jpg","img/08_644505.jpg","img/08_721030.jpg","img/08_1554182.jpg","img/08_2042148.jpg","img/08_2058502.jpg","img/08_2062880.jpg",
"img/08_3661879.jpg","img/08_14756683.jpg","img/08_21328690.jpg"];
cat1=shuffle(cat1);
cat2=shuffle(cat2);
cat3=shuffle(cat3);
cat4=shuffle(cat4);

//BEGIN PRECACHE
var all=(cat1.concat(cat2,cat3,cat4));

		jsPsych.preloadImages(all, function(){ startExperiment(); });
		
//END PRECACHE
		
		
var order=[0,1,2,3];
order=getOrder(order);
var newArray=[];
holdorders=[];
window.alert(order);


///STUDY ARRAY
newArray.splice(order[0],0,cat1[0]);newArray.splice(order[1],0,cat2[0]);newArray.splice(order[2],0,cat3[0]);newArray.splice(order[3],0,cat4[0]);
order=getOrder(order);
newArray.splice((order[0]+4),0,cat1[1]);newArray.splice((order[1]+4),0,cat2[1]);newArray.splice((order[2]+4),0,cat3[1]);newArray.splice((order[3]+4),0,cat4[1]);
order=getOrder(order);
newArray.splice((order[0]+8),0,cat1[2]);newArray.splice((order[1]+8),0,cat2[2]);newArray.splice((order[2]+8),0,cat3[2]);newArray.splice((order[3]+8),0,cat4[2]);
order=getOrder(order);
newArray.splice((order[0]+12),0,cat1[3]);newArray.splice((order[1]+12),0,cat2[3]);newArray.splice((order[2]+12),0,cat3[3]);newArray.splice((order[3]+12),0,cat4[3]);
order=getOrder(order);
newArray.splice((order[0]+16),0,cat1[4]);newArray.splice((order[1]+16),0,cat2[4]);newArray.splice((order[2]+16),0,cat3[4]);newArray.splice((order[3]+16),0,cat4[4]);
order=getOrder(order);
newArray.splice((order[0]+20),0,cat1[5]);newArray.splice((order[1]+20),0,cat2[5]);newArray.splice((order[2]+20),0,cat3[5]);newArray.splice((order[3]+20),0,cat4[5]);
order=getOrder(order);
newArray.splice((order[0]+24),0,cat1[6]);newArray.splice((order[1]+24),0,cat2[6]);newArray.splice((order[2]+24),0,cat3[6]);newArray.splice((order[3]+24),0,cat4[6]);
order=getOrder(order);
newArray.splice((order[0]+28),0,cat1[7]);newArray.splice((order[1]+28),0,cat2[7]);newArray.splice((order[2]+28),0,cat3[7]);newArray.splice((order[3]+28),0,cat4[7]);
order=getOrder(order);
newArray.splice((order[0]+32),0,cat1[8]);newArray.splice((order[1]+32),0,cat2[8]);newArray.splice((order[2]+32),0,cat3[8]);newArray.splice((order[3]+32),0,cat4[8]);
order=getOrder(order);
newArray.splice((order[0]+36),0,cat1[9]);newArray.splice((order[1]+36),0,cat2[9]);newArray.splice((order[2]+36),0,cat3[9]);newArray.splice((order[3]+36),0,cat4[9]);
order=getOrder(order);
newArray.splice((order[0]+40),0,cat1[10]);newArray.splice((order[1]+40),0,cat2[10]);newArray.splice((order[2]+40),0,cat3[10]);newArray.splice((order[3]+40),0,cat4[10]);
order=getOrder(order);
newArray.splice((order[0]+44),0,cat1[11]);newArray.splice((order[1]+44),0,cat2[11]);newArray.splice((order[2]+44),0,cat3[11]);newArray.splice((order[3]+44),0,cat4[11]);
order=getOrder(order);
newArray.splice((order[0]+48),0,cat1[12]);newArray.splice((order[1]+48),0,cat2[12]);newArray.splice((order[2]+48),0,cat3[12]);newArray.splice((order[3]+48),0,cat4[12]);
order=getOrder(order);


/////TEST ARRAY
testArray=[];
testArray.splice((order[0]),0,cat1[13]);testArray.splice((order[1]),0,cat2[13]);testArray.splice((order[2]),0,cat3[13]);testArray.splice((order[3]),0,cat4[13]);
order=getOrder(order);
testArray.splice((order[0]+4),0,cat1[14]);testArray.splice((order[1]+4),0,cat2[14]);testArray.splice((order[2]+4),0,cat3[14]);testArray.splice((order[3]+4),0,cat4[14]);
order=getOrder(order);
testArray.splice((order[0]+8),0,cat1[15]);testArray.splice((order[1]+8),0,cat2[15]);testArray.splice((order[2]+8),0,cat3[15]);testArray.splice((order[3]+8),0,cat4[15]);
order=getOrder(order);
testArray.splice((order[0]+12),0,cat1[16]);testArray.splice((order[1]+12),0,cat2[16]);testArray.splice((order[2]+12),0,cat3[16]);testArray.splice((order[3]+12),0,cat4[16]);
order=getOrder(order);
testArray.splice((order[0]+16),0,cat1[17]);testArray.splice((order[1]+16),0,cat2[17]);testArray.splice((order[2]+16),0,cat3[17]);testArray.splice((order[3]+16),0,cat4[17]);
order=getOrder(order);
testArray.splice((order[0]+20),0,cat1[18]);testArray.splice((order[1]+20),0,cat2[18]);testArray.splice((order[2]+20),0,cat3[18]);testArray.splice((order[3]+20),0,cat4[18]);
order=getOrder(order);
testArray.splice((order[0]+24),0,cat1[19]);testArray.splice((order[1]+24),0,cat2[19]);testArray.splice((order[2]+24),0,cat3[19]);testArray.splice((order[3]+24),0,cat4[19]);
order=getOrder(order);
testArray.splice((order[0]+28),0,cat1[20]);testArray.splice((order[1]+28),0,cat2[20]);testArray.splice((order[2]+28),0,cat3[20]);testArray.splice((order[3]+28),0,cat4[20]);

testArray=shuffle(testArray);

//TESTING
interStudy=newArray.slice(0,4);
interStudy=shuffle(interStudy);
window.alert(interStudy);
window.alert(newArray.slice(0,4));
///END TESTING

//var imArray = shuffle(all);//=["img/07_2458.jpg","img/07_94566.jpg","img/06_5062.jpg","img/06_477473.jpg","img/05_8074461.jpg","img/05_553503.jpg","img/08_120089.jpg","img/08_71964.jpg"];
//var  myArray = interShuff(cat1,cat2,cat3,cat4);
  var page_1_questions = ["How old are you?", "Where were you born?","Have you ever taken college courses in chemistry? Type in the amount of chemistry courses (0 if none)"];
  var page_2_questions = ["What is your favorite food?"];

//var studyArray = tmpArray.slice(0,47);
var study_block = {
			type: "single-stim",
			stimuli: newArray,
			timing_response: 2000,
			is_html: false,
			continue_after_response: false
		};
		
		
		///NEED SOME DELAY HERE, 10 MINUTES
		
/*
var test_block = {
			type: "single-stim",
			stimuli: testArray,
			timing_response: -1, //This means it waits until they press a key
			is_html: true,
			continue_after_response: true
			prompt: "1) Glemdate  2) Betalonine  3) Alporost  4) Yirnirine "
		};

*/
  
//Need to make function that pseudo shuffles in pairs (to have learning blocks preceed the test block etc, e.g. T2 learn block is always before T2 Test block)
//var the_blocks = jsPsych.randomization.repeat(block_T1_study, block_T1,block_T2_study,block_T2,block_T3_study,block_T3,block_R1_study,block_R1,block_R2_study,block_R2,block_R3_study,block_R3], 1);

var the_experiment = [study_block];
  jsPsych.init({
    display_element: $('#jspsych-target'),
    experiment_structure: the_experiment//[block_T2,block_T3,block_T1,block_STUDY,block_R1,block_R2,block_R3],
    
});

function getOrder (order) {
//var newOrder = shuffle(order);	
thechoice= Math.floor((Math.random() * 6) + 1);
var newOrder=[];
if(thechoice==1){
	newOrder = [0,1,2,3];
}
if(thechoice==2){
	newOrder = [0,1,3,2];
}
if(thechoice==3){
	newOrder = [0,3,1,2];
}
if(thechoice==4){
	newOrder = [0,3,2,1];
}
if(thechoice==5){
	newOrder = [0,2,3,1];
}
if(thechoice==6){
	newOrder = [0,2,1,3];
}
if(thechoice==7){
	newOrder = [1,3,2,0];
}
if(thechoice==8){
	newOrder = [2,3,1,0];
}
if(thechoice==9){
	newOrder = [1,2,3,0];
}
if(thechoice==10){
	newOrder = [2,1,3,0];
}

return newOrder;
}



function shuffle(o){
    for(var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
}


  </script>
</html>
